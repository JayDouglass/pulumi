version_cache = cache()

def get_version(language = None):
    cmd = "pulumictl get version"
    if language:
        cmd = f"{cmd} --language {language}"

    return version_cache.once(cmd, lambda: sh.output(cmd, cwd = path("//")).strip())
